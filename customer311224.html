<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Dashboard</title>
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <header>
        <div class="dashboard-container">
            <div id="welcome-message"></div>
            <div class="d-flex justify-content-between align-items-center">
                <h1 class="fs-4">Welcome to Your Dashboard</h1>
                <button class="btn btn-danger" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <main class="container my-4">
        <section id="misc">
            <h2 class="text-primary mb-3">Customer Ledger</h2>
            <p id="total-balance"></p>
            <p id="last-order"></p>
            <p id="last-payment"></p>
            <div>
                <label for="paymentAmount">Make Payment:</label>
                <input type="number" id="paymentAmount" name="paymentAmount" placeholder="Enter amount">
                <button id="payButton" class="btn btn-primary">Pay</button>
            </div>
            <button id="viewLedgerButton" class="btn btn-secondary mt-3">View Ledger</button>
            <h3 class="text-primary mb-3">Balance Details</h3>
            <div class="table-responsive" style="display: none;" id="ledgerContainer">
                <table id="ledgerTable" class="table table-striped table-hover">
                    <thead class="table-primary">
                        <tr>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Debit</th>
                            <th>Credit</th>
                            <th>Balance</th>
                        </tr>
                    </thead>
                    <tbody>
<!-- Ledger entries will be dynamically loaded here -->
                    </tbody>
                </table>
            </div>
            <div id="paginationContainer" class="mt-3"></div>
        </section>
        <section id="orderSection">
            <h3 class="text-primary mb-3">Place an Order</h3>
            <button id="orderButton" class="btn btn-secondary">Order</button>
            <div id="orderContainer" style="display: none;">
                <label for="companySelect">Select Company:</label>
                <select id="companySelect" class="form-select">
                    <option value="">Select a company</option>
                    <!-- Options will be dynamically populated -->
                </select>
                <div id="stockTableContainer" class="table-responsive mt-3" style="display: none;">
                    <table id="stockTable" class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>Item</th>
                                <th>MRP</th>
                                <th>Rate</th>
                                <th>Stock</th>
                                <th>Quantity</th>
                                <th>Add</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Stock items will be dynamically loaded here -->
                        </tbody>
                    </table>
                </div>
                <button id="confirmOrderButton" class="btn btn-primary mt-3" style="display: none;">Confirm Order</button>
                <div id="cartContainer" class="mt-3" style="display: none;">
                    <h4>Cart</h4>
                    <ul id="cartList">
                        <!-- Cart items will be dynamically loaded here -->
                    </ul>
                    <p id="totalAmount"></p>
                    <button id="finalizeOrderButton" class="btn btn-success">Finalize Order</button>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <a href="#">Contact Us</a> | <a href="#">Privacy Policy</a> | <a href="offers.html">Offers</a>
        <p>&copy; 2024 Aaradhya Pharmaceuticals. All rights reserved.</p>
    </footer>
    <script src="scripts/pagination.js"></script>
    <script src="scripts/config.js"></script>
    <script src="scripts/google-sheets-api.js"></script>
    <script src="scripts/logout.js"></script>
    <script src="scripts/customers311224.js"></script>
    <script src="scripts/order.js"></script>
    <script>
        document.getElementById('payButton').addEventListener('click', () => {
            const paymentAmount = document.getElementById('paymentAmount').value;
            if (paymentAmount) {
                sessionStorage.setItem('paymentAmount', paymentAmount);
                window.open('payment.html', 'Payment Options', 'width=600,height=400');
            } else {
                alert('Please enter a payment amount.');
            }
        });
    </script>
</body>
</html>